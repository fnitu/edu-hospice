<div class="create-course-content-container">
  <div class="course-title">
    {{ course?.name }}
  </div>
  <div class="button-container">
    <button mat-raised-button color="primary" (click)="addSection()">
      {{ "admin.createCourseContent.addSectionButton" | translate }}
    </button>
  </div>
  <div class="sections-container">
    <div class="section" *ngFor="let section of course?.sectionList; let sectionIndex = index">
      <div class="section-container">
        <div class="title" *ngIf="section.id !== editedSectionId">
          {{ section.name }}
        </div>

        <input class="input" matInput value="{{ section.name }}"
               *ngIf="section.id === editedSectionId" appAutoFocus
               (keypress)="setSectionTitle($event, section)"
               (focusout)="setSectionTitle($event, section)"/>

        <div class="edit" (click)="editSectionTitle(section)" *ngIf="section.id !== editedSectionId">
          <span class="material-icons-outlined">mode_edit</span>
        </div>
        <div class="delete" (click)="deleteSection(section)" *ngIf="section.id !== editedSectionId">
          <span class="material-icons-outlined">delete_forever</span>
        </div>
        <div class="visibility" (click)="editVisibilityStatus(section)" *ngIf="section.id !== editedContentId">
          <span class="material-icons-outlined visibilityIcon" *ngIf="section.visible" >visibility</span>
          <span class="material-icons-outlined visibilityOffIcon" *ngIf="!section.visible" >visibility_off</span>
        </div>

        <div class="button-container">
          <button mat-raised-button color="primary" (click)="editSection(section)">
            {{ "admin.createCourseContent.editSectionButton" | translate }}
          </button>
        </div>
      </div>

      <div class="content-container">
        <div class="content" *ngFor="let content of section.adminContentDetails; let i = index">

          <div [ngSwitch]="content.type" class="node-icon">
            <mat-icon *ngSwitchCase="'PDF'">library_books</mat-icon>
            <mat-icon *ngSwitchCase="'VIDEO'">play_circle_filled</mat-icon>
            <mat-icon *ngSwitchCase="'ZOOM'">video_camera_front</mat-icon>
            <mat-icon *ngSwitchCase="'QUIZ'">quiz</mat-icon>
          </div>

          <div class="title" *ngIf="content.id !== editedContentId">
            {{ sectionIndex + 1 }}.{{ i + 1 }} {{ content.name }}
          </div>

          <input class="input" matInput value="{{ content.name }}"
                 *ngIf="content.id === editedContentId" appAutoFocus
                 (keypress)="setContentTitle($event, content)"
                 (focusout)="setContentTitle($event, content)"  />

          <div class="edit" (click)="editContentTitle(content)" *ngIf="content.id !== editedContentId">
            <span class="material-icons-outlined">mode_edit</span>
          </div>
          <div class="delete" (click)="deleteContent(content)" *ngIf="content.id !== editedContentId">
            <span class="material-icons-outlined">delete_forever</span>
          </div>

          <div class="button-container">
            <button mat-raised-button color="primary" class="button"
                    (click)="editContent(content)">
              {{ "admin.createCourseContent.editContentButton" | translate }}
            </button>

            <button mat-raised-button color="primary" class="button"
                    [matBadge]="content.resourceSummary.length"
                    matBadgePosition="after" matBadgeColor="accent"
                    matBadgeSize="medium" (click)="manageResources(content)">
              Gestioneaza resurse
            </button>
          </div>
        </div>
      </div>

      <div class="button-container">
        <button mat-raised-button color="primary" (click)="addContent(section)">
          {{ "admin.createCourseContent.addContentButton" | translate }}
        </button>
        <button mat-raised-button color="primary" (click)="addSection()">
          {{ "admin.createCourseContent.addSectionButton" | translate }}
        </button>
      </div>
    </div>
  </div>
</div>
